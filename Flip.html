<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FLIP! v10 Stable</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap');
        
        body { 
            margin: 0; overflow: hidden; background: #f8fafc; 
            font-family: 'Outfit', sans-serif; display: flex; flex-direction: column; height: 100vh;
        }

        /* UI Layout */
        #ui-container { flex: 0 0 auto; z-index: 20; padding: 12px; pointer-events: none; }
        #canvas-wrapper { flex: 1 1 auto; position: relative; background: #fff; width: 100%; overflow: hidden; }
        
        /* Interactive Elements */
        .card { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-radius: 24px; box-shadow: 0 8px 32px rgba(0,0,0,0.05); pointer-events: auto; }
        .btn { transition: all 0.2s; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .btn:active { transform: scale(0.96); }
        
        .input-std { background: #f1f5f9; border: 1px solid #e2e8f0; border-radius: 12px; padding: 10px; font-size: 14px; width: 100%; outline: none; }
        .input-std:focus { border-color: #2563eb; background: #fff; }

        /* Custom Scroll */
        .scroll-hide::-webkit-scrollbar { display: none; }
        
        /* Color Dots */
        .color-dot { width: 28px; height: 28px; border-radius: 50%; border: 2px solid transparent; cursor: pointer; }
        .color-dot.active { border-color: #1e293b; transform: scale(1.1); }
    </style>
</head>
<body>

    <div id="ui-container" class="absolute inset-x-0 top-0">
        <div class="card p-4 max-w-md mx-auto space-y-3">
            
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <h1 class="text-2xl font-800 text-slate-800 tracking-tight">FLIP<span class="text-blue-600">!</span></h1>
                    <span id="header-date" class="text-xs font-bold text-slate-400 uppercase mt-1"></span>
                </div>
                <div class="flex items-center gap-2">
                    <button onclick="app.focusNow()" class="w-8 h-8 rounded-full bg-blue-50 text-blue-600 font-bold text-xs hover:bg-blue-100 transition-colors">‚óé</button>
                    <div id="clock" class="bg-slate-900 text-white px-3 py-1.5 rounded-full text-xs font-bold tabular-nums">00:00</div>
                </div>
            </div>

            <div class="grid grid-cols-[1fr_auto_auto] gap-2">
                <button onclick="app.openModal()" class="btn h-12 bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-bold shadow-lg shadow-blue-200">
                    + –ù–û–í–ê –ü–û–î–Ü–Ø
                </button>
                
                <div class="relative group">
                    <button class="btn w-12 h-12 bg-slate-100 hover:bg-slate-200 rounded-2xl text-slate-600">
                        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/></svg>
                    </button>
                    <div class="absolute top-full right-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-slate-100 hidden group-hover:block p-1 overflow-hidden">
                        <label class="flex items-center gap-3 px-3 py-3 hover:bg-slate-50 cursor-pointer text-sm font-medium text-slate-700">
                            <span>üìÇ –Ü–º–ø–æ—Ä—Ç (.ics)</span>
                            <input type="file" accept=".ics,.json" class="hidden" onchange="app.importFile(this)">
                        </label>
                        <button onclick="app.exportICS()" class="w-full text-left flex items-center gap-3 px-3 py-3 hover:bg-slate-50 text-sm font-medium text-slate-700">
                            <span>üíæ –ï–∫—Å–ø–æ—Ä—Ç (.ics)</span>
                        </button>
                        <div class="h-px bg-slate-100 my-1"></div>
                        <button onclick="app.hardReset()" class="w-full text-left flex items-center gap-3 px-3 py-2 text-xs font-bold text-red-500 hover:bg-red-50">
                            ‚ö†Ô∏è –°–∫–∏–Ω—É—Ç–∏ –≤—Å–µ
                        </button>
                    </div>
                </div>

                <button onclick="document.getElementById('settings-panel').classList.toggle('hidden')" class="btn w-12 h-12 bg-slate-100 hover:bg-slate-200 rounded-2xl text-slate-600">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/></svg>
                </button>
            </div>

            <div id="settings-panel" class="hidden pt-2 border-t border-slate-100 animate-in slide-in-from-top-2">
                <div class="grid grid-cols-2 gap-3 mb-2">
                    <div class="space-y-1">
                        <label class="text-[10px] font-bold text-slate-400 uppercase pl-1">–ü–æ—á–∞—Ç–æ–∫</label>
                        <input id="cfg-from" type="date" class="input-std py-1.5 text-xs">
                    </div>
                    <div class="space-y-1">
                        <label class="text-[10px] font-bold text-slate-400 uppercase pl-1">–ö—ñ–Ω–µ—Ü—å</label>
                        <input id="cfg-to" type="date" class="input-std py-1.5 text-xs">
                    </div>
                </div>
                <div class="space-y-1">
                    <div class="flex justify-between">
                        <label class="text-[10px] font-bold text-slate-400 uppercase pl-1">–í–∏—Å–æ—Ç–∞ –≤–∏—Ç–∫–∞</label>
                        <span id="height-val" class="text-[10px] font-bold text-blue-600">6.0</span>
                    </div>
                    <input id="cfg-height" type="range" min="2" max="15" step="0.5" value="6" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600">
                </div>
            </div>

            <div id="event-list" class="max-h-[120px] overflow-y-auto scroll-hide space-y-2 pt-1">
                </div>
        </div>
    </div>

    <div id="canvas-wrapper"></div>

    <div id="modal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4">
        <div class="bg-white w-full max-w-sm rounded-[32px] p-6 shadow-2xl scale-95 opacity-0 transition-all duration-200" id="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-900 text-slate-800">–î–µ—Ç–∞–ª—ñ –ø–æ–¥—ñ—ó</h2>
                <button onclick="app.closeModal()" class="w-8 h-8 flex items-center justify-center bg-slate-100 rounded-full text-slate-500">‚úï</button>
            </div>
            
            <div class="space-y-4">
                <input id="ev-title" type="text" placeholder="–ù–∞–∑–≤–∞ –ø–æ–¥—ñ—ó" class="input-std text-lg font-bold">
                <textarea id="ev-desc" placeholder="–û–ø–∏—Å / –ù–æ—Ç–∞—Ç–∫–∏" rows="2" class="input-std text-xs resize-none"></textarea>
                
                <div class="grid grid-cols-2 gap-3">
                    <div class="space-y-1">
                        <label class="text-[9px] font-bold text-slate-400 uppercase">–ü–æ—á–∞—Ç–æ–∫</label>
                        <input id="ev-start" type="datetime-local" class="input-std text-xs p-2">
                    </div>
                    <div class="space-y-1">
                        <label class="text-[9px] font-bold text-slate-400 uppercase">–ö—ñ–Ω–µ—Ü—å</label>
                        <input id="ev-end" type="datetime-local" class="input-std text-xs p-2">
                    </div>
                </div>

                <div class="flex justify-between px-1" id="color-palette"></div>
                <input type="hidden" id="ev-color" value="#3b82f6">

                <div class="flex gap-3 pt-2">
                    <button onclick="app.saveEvent()" class="flex-1 btn h-12 bg-blue-600 text-white rounded-xl font-bold">–ó–ë–ï–†–ï–ì–¢–ò</button>
                    <button id="btn-delete" onclick="app.deleteEvent()" class="hidden w-12 h-12 btn bg-red-50 text-red-500 rounded-xl">üóë</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- CORE APPLICATION LOGIC ---
        const app = {
            data: { events: [], settings: { h: 6 } },
            scene: null, camera: null, renderer: null, controls: null,
            groups: { main: null, events: null },
            editingId: null,

            init() {
                // Load Data
                try {
                    const stored = localStorage.getItem('flip_v10_data');
                    if (stored) this.data = JSON.parse(stored);
                } catch(e) { console.error('Data load error', e); }

                // Default Settings Dates
                const now = new Date();
                const dFrom = new Date(now); dFrom.setDate(now.getDate() - 2);
                const dTo = new Date(now); dTo.setDate(now.getDate() + 14);
                
                // Init UI Inputs
                document.getElementById('cfg-from').value = dFrom.toISOString().split('T')[0];
                document.getElementById('cfg-to').value = dTo.toISOString().split('T')[0];
                
                // Initialize 3D
                this.initThree();
                this.setupInputs();
                this.renderLoop();
                
                // Initial Build
                this.buildWorld();
                this.updateUI();
            },

            initThree() {
                const container = document.getElementById('canvas-wrapper');
                const w = container.clientWidth;
                const h = container.clientHeight;

                this.scene = new THREE.Scene();
                this.scene.background = new THREE.Color(0xffffff);
                
                // Camera
                this.camera = new THREE.PerspectiveCamera(45, w / h, 0.1, 1000);
                this.camera.position.set(40, 30, 40);

                // Renderer
                this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                this.renderer.setSize(w, h);
                this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                container.appendChild(this.renderer.domElement);

                // Controls
                this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);
                this.controls.enableDamping = true;
                this.controls.dampingFactor = 0.05;

                // Groups
                this.groups.main = new THREE.Group();
                this.groups.events = new THREE.Group();
                this.scene.add(this.groups.main, this.groups.events);

                // Helper: Current Time Disk
                const disk = new THREE.Mesh(
                    new THREE.CylinderGeometry(10, 10, 0.05, 64, 1, true),
                    new THREE.MeshBasicMaterial({ color: 0x2563eb, opacity: 0.1, transparent: true, side: THREE.DoubleSide })
                );
                this.scene.add(disk); // Static reference plane
                
                // Current Time Marker (Blue ball)
                this.marker = new THREE.Mesh(
                    new THREE.SphereGeometry(0.6),
                    new THREE.MeshBasicMaterial({ color: 0x2563eb })
                );
                this.scene.add(this.marker);

                // Raycaster for clicks
                const raycaster = new THREE.Raycaster();
                const mouse = new THREE.Vector2();
                
                container.addEventListener('pointerdown', (e) => {
                    e.preventDefault();
                    // Fix coordinate calculation
                    const rect = container.getBoundingClientRect();
                    mouse.x = ((e.clientX - rect.left) / rect.width) * 2 - 1;
                    mouse.y = -((e.clientY - rect.top) / rect.height) * 2 + 1;
                    
                    raycaster.setFromCamera(mouse, this.camera);
                    const intersects = raycaster.intersectObjects(this.groups.events.children);
                    
                    if (intersects.length > 0) {
                        const id = intersects[0].object.userData.id;
                        this.openModal(id);
                    }
                });

                // Window Resize
                window.addEventListener('resize', () => {
                    const nw = container.clientWidth;
                    const nh = container.clientHeight;
                    this.camera.aspect = nw / nh;
                    this.camera.updateProjectionMatrix();
                    this.renderer.setSize(nw, nh);
                });
            },

            // --- MATH & GEOMETRY ---
            getSpiralPos(timestamp) {
                const cfgFrom = new Date(document.getElementById('cfg-from').value).getTime();
                const cfgH = parseFloat(document.getElementById('cfg-height').value);
                
                // Hours passed since start date
                const hours = (timestamp - cfgFrom) / 3600000;
                
                // One revolution per 24 hours
                const angle = (hours / 24) * Math.PI * 2;
                const radius = 10;
                const y = (hours / 24) * cfgH;

                return new THREE.Vector3(
                    Math.cos(angle) * radius,
                    y,
                    Math.sin(angle) * radius
                );
            },

            buildWorld() {
                // Clear old
                this.groups.main.clear();
                this.groups.events.clear();

                const tStart = new Date(document.getElementById('cfg-from').value).getTime();
                const tEnd = new Date(document.getElementById('cfg-to').value).getTime();
                
                // Safety check
                if (!tStart || !tEnd || tEnd <= tStart) return;

                // 1. Draw Spiral Base Line
                const pts = [];
                // Optimized step: 30 minutes
                for (let t = tStart; t <= tEnd; t += 1800000) {
                    pts.push(this.getSpiralPos(t));
                }
                const spiralGeo = new THREE.BufferGeometry().setFromPoints(pts);
                const spiralMat = new THREE.LineBasicMaterial({ color: 0xcbd5e1 });
                this.groups.main.add(new THREE.Line(spiralGeo, spiralMat));

                // 2. Draw Events
                this.data.events.forEach(ev => {
                    // Only draw if within range
                    if (ev.end < tStart || ev.start > tEnd) return;

                    const drawStart = Math.max(ev.start, tStart);
                    const drawEnd = Math.min(ev.end, tEnd);
                    
                    if (drawEnd - drawStart < 60000) return; // Skip too short

                    const curvePts = [];
                    // Adaptive resolution: 10 points usually enough
                    for(let i=0; i<=10; i++) {
                        const t = drawStart + (drawEnd - drawStart) * (i/10);
                        curvePts.push(this.getSpiralPos(t));
                    }
                    
                    const curve = new THREE.CatmullRomCurve3(curvePts);
                    const tubeGeo = new THREE.TubeGeometry(curve, 12, 0.4, 8, false);
                    const tubeMat = new THREE.MeshBasicMaterial({ color: ev.color });
                    const mesh = new THREE.Mesh(tubeGeo, tubeMat);
                    mesh.userData = { id: ev.id };
                    this.groups.events.add(mesh);
                });
            },

            renderLoop() {
                requestAnimationFrame(() => this.renderLoop());
                
                const now = Date.now();
                const pos = this.getSpiralPos(now);
                
                // Update Marker
                this.marker.position.copy(pos);
                
                // Live Clock Update
                const d = new Date();
                document.getElementById('clock').innerText = d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
                document.getElementById('header-date').innerText = d.toLocaleDateString('uk-UA', {weekday:'short', day:'numeric', month:'short'});

                this.controls.update();
                this.renderer.render(this.scene, this.camera);
            },

            // --- DATA MANAGEMENT ---
            saveData() {
                localStorage.setItem('flip_v10_data', JSON.stringify(this.data));
                this.buildWorld();
                this.updateUI();
            },

            openModal(id = null) {
                this.editingId = id;
                const modal = document.getElementById('modal');
                const content = document.getElementById('modal-content');
                const btnDel = document.getElementById('btn-delete');
                
                // Defaults
                let ev = { 
                    title: '', desc: '', 
                    start: Date.now(), end: Date.now() + 3600000, 
                    color: '#3b82f6' 
                };

                if (id) {
                    const found = this.data.events.find(e => e.id === id);
                    if (found) ev = found;
                    btnDel.classList.remove('hidden');
                } else {
                    btnDel.classList.add('hidden');
                }

                // Set Inputs (Timezone fix)
                const toLocal = (ts) => new Date(ts - new Date().getTimezoneOffset() * 60000).toISOString().slice(0, 16);
                
                document.getElementById('ev-title').value = ev.title;
                document.getElementById('ev-desc').value = ev.desc || '';
                document.getElementById('ev-start').value = toLocal(ev.start);
                document.getElementById('ev-end').value = toLocal(ev.end);
                document.getElementById('ev-color').value = ev.color;
                
                this.renderPalette(ev.color);

                // Show
                modal.classList.remove('hidden');
                setTimeout(() => {
                    content.classList.remove('scale-95', 'opacity-0');
                    content.classList.add('scale-100', 'opacity-100');
                }, 10);
            },

            closeModal() {
                const modal = document.getElementById('modal');
                const content = document.getElementById('modal-content');
                content.classList.remove('scale-100', 'opacity-100');
                content.classList.add('scale-95', 'opacity-0');
                setTimeout(() => modal.classList.add('hidden'), 200);
            },

            saveEvent() {
                const title = document.getElementById('ev-title').value || '–ë–µ–∑ –Ω–∞–∑–≤–∏';
                const start = new Date(document.getElementById('ev-start').value).getTime();
                const end = new Date(document.getElementById('ev-end').value).getTime();
                const color = document.getElementById('ev-color').value;
                const desc = document.getElementById('ev-desc').value;

                if (end <= start) { alert('–ö—ñ–Ω–µ—Ü—å –ø–æ–¥—ñ—ó –º–∞—î –±—É—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ –ø–æ—á–∞—Ç–∫—É'); return; }

                if (this.editingId) {
                    const idx = this.data.events.findIndex(e => e.id === this.editingId);
                    if (idx !== -1) this.data.events[idx] = { id: this.editingId, title, desc, start, end, color };
                } else {
                    this.data.events.push({ id: Date.now(), title, desc, start, end, color });
                }

                this.saveData();
                this.closeModal();
            },

            deleteEvent() {
                if (confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü—é –ø–æ–¥—ñ—é?')) {
                    this.data.events = this.data.events.filter(e => e.id !== this.editingId);
                    this.saveData();
                    this.closeModal();
                }
            },

            // --- UI HELPERS ---
            updateUI() {
                const list = document.getElementById('event-list');
                const now = Date.now();
                // Show upcoming 10 events
                const upcoming = this.data.events
                    .filter(e => e.end > now)
                    .sort((a,b) => a.start - b.start)
                    .slice(0, 10);

                list.innerHTML = upcoming.map(e => `
                    <div onclick="app.openModal(${e.id})" class="flex items-center gap-3 p-2 bg-slate-50 rounded-lg border border-slate-100 cursor-pointer hover:bg-white hover:shadow-sm transition-all">
                        <div class="w-1.5 h-8 rounded-full" style="background:${e.color}"></div>
                        <div class="flex-1 min-w-0">
                            <div class="font-bold text-xs text-slate-700 truncate">${e.title}</div>
                            <div class="text-[10px] text-slate-400">
                                ${new Date(e.start).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})} - 
                                ${new Date(e.end).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})}
                            </div>
                        </div>
                    </div>
                `).join('');
                if(!upcoming.length) list.innerHTML = '<div class="text-center text-[10px] text-slate-300 py-2">–ù–µ–º–∞—î –Ω–∞–π–±–ª–∏–∂—á–∏—Ö –ø–æ–¥—ñ–π</div>';
            },

            renderPalette(activeColor) {
                const colors = ['#ef4444', '#f97316', '#eab308', '#22c55e', '#3b82f6', '#8b5cf6', '#d946ef', '#64748b'];
                const container = document.getElementById('color-palette');
                container.innerHTML = colors.map(c => `
                    <div class="color-dot ${c === activeColor ? 'active' : ''}" 
                         style="background: ${c}" 
                         onclick="document.getElementById('ev-color').value='${c}'; app.renderPalette('${c}')">
                    </div>
                `).join('');
            },

            focusNow() {
                const pos = this.getSpiralPos(Date.now());
                this.controls.target.copy(pos);
                // Offset camera slightly up and out
                this.camera.position.set(pos.x + 30, pos.y + 20, pos.z + 30);
                this.controls.update();
            },

            setupInputs() {
                ['cfg-from', 'cfg-to', 'cfg-height'].forEach(id => {
                    document.getElementById(id).addEventListener('input', (e) => {
                        if(id === 'cfg-height') document.getElementById('height-val').innerText = parseFloat(e.target.value).toFixed(1);
                        this.buildWorld();
                    });
                });
            },

            // --- IMPORT / EXPORT (Improved) ---
            hardReset() {
                if(confirm('–£–í–ê–ì–ê: –¶–µ –≤–∏–¥–∞–ª–∏—Ç—å –≤—Å—ñ –ø–æ–¥—ñ—ó —ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è. –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏?')) {
                    localStorage.removeItem('flip_v10_data');
                    location.reload();
                }
            },

            exportICS() {
                let ics = "BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//FLIP//UA\n";
                this.data.events.forEach(ev => {
                    const fmt = d => new Date(d).toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
                    ics += "BEGIN:VEVENT\n";
                    ics += `DTSTART:${fmt(ev.start)}\nDTEND:${fmt(ev.end)}\nSUMMARY:${ev.title}\n`;
                    if(ev.desc) ics += `DESCRIPTION:${ev.desc}\n`;
                    ics += "END:VEVENT\n";
                });
                ics += "END:VCALENDAR";
                
                const blob = new Blob([ics], {type: 'text/calendar'});
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `flip_calendar_${Date.now()}.ics`;
                link.click();
            },

            importFile(input) {
                const file = input.files[0];
                if(!file) return;
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    const text = e.target.result;
                    if (file.name.endsWith('.json')) {
                        try {
                            const parsed = JSON.parse(text);
                            if(parsed.events) this.data = parsed;
                            this.saveData();
                            alert('JSON —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ');
                        } catch(err) { alert('–ü–æ–º–∏–ª–∫–∞ JSON'); }
                    } else {
                        // Robust ICS Parser
                        const events = [];
                        const lines = text.split(/\r\n|\n|\r/);
                        let inEvent = false;
                        let curr = {};
                        
                        // Regex helpers
                        const getDate = (l) => {
                            const str = l.split(':')[1];
                            if(!str) return null;
                            // Basic support for 20230101T120000Z
                            const y = str.substr(0,4), m = str.substr(4,2), d = str.substr(6,2);
                            const h = str.substr(9,2) || '00', min = str.substr(11,2) || '00';
                            return new Date(`${y}-${m}-${d}T${h}:${min}:00Z`).getTime();
                        };

                        lines.forEach(l => {
                            if(l.startsWith('BEGIN:VEVENT')) { inEvent = true; curr = {id: Math.random(), color: '#3b82f6'}; }
                            else if(l.startsWith('END:VEVENT')) { 
                                if(curr.start && curr.title) events.push(curr); 
                                inEvent = false; 
                            }
                            else if(inEvent) {
                                if(l.startsWith('SUMMARY:')) curr.title = l.substring(8);
                                if(l.startsWith('DTSTART')) curr.start = getDate(l);
                                if(l.startsWith('DTEND')) curr.end = getDate(l);
                                if(l.startsWith('DESCRIPTION:')) curr.desc = l.substring(12);
                            }
                        });

                        if(events.length > 0) {
                            this.data.events = [...this.data.events, ...events];
                            this.saveData();
                            alert(`–Ü–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ ${events.length} –ø–æ–¥—ñ–π`);
                        } else {
                            alert('–ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ –ø–æ–¥—ñ–π —É —Ñ–∞–π–ª—ñ');
                        }
                    }
                };
                reader.readAsText(file);
            }
        };

        // Start App
        window.onload = () => app.init();
    </script>
</body>
</html>
