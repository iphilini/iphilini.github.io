<!DOCTYPE html>
<html>
<head>
    <title>HELIX CORE: PHASE 1</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>body { margin: 0; background: #f0f2f5; overflow: hidden; }</style>
</head>
<body>
    <div style="position:absolute; top:20px; left:20px; z-index:10; font-family:monospace; background:white; padding:15px; border-radius:10px; box-shadow:0 4px 6px rgba(0,0,0,0.1);">
        <strong>ALPHA (Staging Level):</strong> <span id="alpha-val">1.0</span><br>
        <input id="alpha-slider" type="range" min="0" max="3" step="0.01" value="1.0" style="width:200px;">
    </div>
    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const group = new THREE.Group();
        scene.add(group);

        // Математика S-рівнів (твій концепт)
        function getSpiralPoint(t, alpha) {
            const drift = 15; // Вертикальна вісь часу
            let x = 0, y = t * drift, z = 0;

            // S2: Денний виток
            if (alpha > 1) {
                const a2 = Math.min(alpha - 1, 1);
                x += Math.cos(t * Math.PI * 2) * 10 * a2;
                z += Math.sin(t * Math.PI * 2) * 10 * a2;
            }

            // S1: Годинна "сходинка" (Inlining за mrakgr)
            if (alpha > 0) {
                const a1 = Math.min(alpha, 1);
                x += Math.cos(t * Math.PI * 24) * 2 * a1;
                z += Math.sin(t * Math.PI * 24) * 2 * a1;
            }

            return new THREE.Vector3(x, y, z);
        }a

        function updateGeometry() {
            group.clear();
            const alpha = parseFloat(document.getElementById('alpha-slider').value);
            document.getElementById('alpha-val').innerText = alpha.toFixed(2);

            const points = [];
            for (let t = 0; t < 2; t += 0.001) { // Малюємо 2 дні
                points.push(getSpiralPoint(t, alpha));
            }

            const geometry = new THREE.BufferGeometry().setFromPoints(points);
            const material = new THREE.LineBasicMaterial({ color: 0x1a202c, linewidth: 2 });
            const line = new THREE.Line(geometry, material);
            group.add(line);
        }

        camera.position.set(30, 30, 30);
        camera.lookAt(0, 15, 0);

        document.getElementById('alpha-slider').oninput = updateGeometry;
        updateGeometry();

        function animate() {
            requestAnimationFrame(animate);
            group.rotation.y += 0.005;
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
