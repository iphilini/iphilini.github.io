<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>HELIX DEBUG: SYSTEM CHECK</title>
    <style>
        body { margin: 0; background-color: #000; overflow: hidden; color: #0f0; font-family: 'Courier New', monospace; }
        #status-overlay {
            position: absolute; top: 10px; left: 10px; z-index: 100;
            background: rgba(0,20,0,0.8); padding: 10px; border: 1px solid #0f0;
        }
        #error-log { color: #f00; margin-top: 10px; }
        canvas { display: block; }
    </style>
</head>
<body>
    <div id="status-overlay">
        > SYSTEM: HELIX CHRONOS (PHASE 1)<br>
        > STATUS: INITIALIZING...<br>
        > STAGING (ALPHA): <span id="alpha-val">1.0</span>
        <div id="error-log"></div>
    </div>

    <script src="https://unpkg.com/three@0.128.0/build/three.min.js"></script>

    <script>
        window.onerror = function(msg) {
            document.getElementById('error-log').innerHTML = "ERROR: " + msg;
        };

        try {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // Додаємо тестовий куб, щоб перевірити чи взагалі працює графіка
            const testBox = new THREE.Mesh(
                new THREE.BoxGeometry(1, 1, 1),
                new THREE.MeshBasicMaterial({ color: 0xff0000, wireframe: true })
            );
            scene.add(testBox);

            // Додаємо сітку координат (Grid)
            const grid = new THREE.GridHelper(100, 50, 0x004400, 0x002200);
            scene.add(grid);

            // Група для спіралі
            const helixGroup = new THREE.Group();
            scene.add(helixGroup);

            function getSpiralPoint(t, alpha) {
                let x = 0, y = t * 10, z = 0;
                // Основна спіраль (День)
                const radius = 10 * alpha;
                x += Math.cos(t * Math.PI * 4) * radius;
                z += Math.sin(t * Math.PI * 4) * radius;
                return new THREE.Vector3(x, y, z);
            }

            function buildHelix() {
                helixGroup.clear();
                const points = [];
                for (let t = 0; t < 5; t += 0.01) {
                    points.push(getSpiralPoint(t, 1.0));
                }
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({ color: 0x00ffff, linewidth: 3 });
                const line = new THREE.Line(geometry, material);
                helixGroup.add(line);
            }

            buildHelix();

            camera.position.set(20, 20, 20);
            camera.lookAt(0, 10, 0);

            function animate() {
                requestAnimationFrame(animate);
                testBox.rotation.y += 0.02;
                helixGroup.rotation.y += 0.005;
                renderer.render(scene, camera);
            }
            animate();

            document.getElementById('status-overlay').innerHTML += "<br>> GRAPHICS: OK";

        } catch (e) {
            document.getElementById('error-log').innerHTML = "BOOT ERROR: " + e.message;
        }
    </script>
</body>
</html>
